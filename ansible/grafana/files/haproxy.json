{"meta": {"hasAcl": false, "provisioned": false, "canSave": true, "canAdmin": true, "folderUrl": "", "created": "2021-01-12T14:11:21+03:30", "url": "/d/QXJQHhIGz/haproxy", "canStar": true, "expires": "0001-01-01T00:00:00Z", "isFolder": false, "updated": "2021-01-12T14:11:21+03:30", "slug": "haproxy", "folderTitle": "General", "version": 1, "provisionedExternalId": "", "createdBy": "admin", "updatedBy": "admin", "folderId": 0, "type": "db", "canEdit": true, "folderUid": ""}, "dashboard": {"style": "dark", "description": "Prometheus HAProxy dashboard", "links": [], "tags": ["haproxy", "servers"], "graphTooltip": 1, "title": "HAProxy", "editable": true, "iteration": 1610432093782, "annotations": {"list": [{"enable": true, "hide": true, "name": "Annotations & Alerts", "builtIn": 1, "datasource": "-- Grafana --", "type": "dashboard", "iconColor": "rgba(0, 211, 255, 1)"}]}, "gnetId": 2428, "timepicker": {"time_options": ["5m", "15m", "1h", "6h", "12h", "24h", "2d", "7d", "30d"], "refresh_intervals": ["5s", "10s", "30s", "1m", "5m", "15m", "30m", "1h", "2h", "1d"]}, "refresh": "5s", "version": 1, "time": {"to": "now", "from": "now-30h"}, "uid": "QXJQHhIGz", "timezone": "browser", "schemaVersion": 26, "panels": [{"repeat": null, "title": "Basic Backend status", "collapsed": false, "datasource": null, "gridPos": {"y": 0, "h": 1, "w": 24, "x": 0}, "panels": [], "type": "row", "id": 86}, {"bars": false, "timeFrom": null, "links": [], "hiddenSeries": false, "thresholds": [], "spaceLength": 10, "nullPointMode": "null", "pluginVersion": "7.3.4", "renderer": "flot", "gridPos": {"y": 1, "h": 4, "w": 24, "x": 0}, "linewidth": 3, "steppedLine": false, "id": 85, "fill": 7, "title": "Backends Up / Down", "tooltip": {"sort": 0, "shared": true, "value_type": "individual"}, "stack": false, "targets": [{"hide": false, "expr": "count(haproxy_backend_up{backend=~\"$backend\", instance=~\"$host:$port\"} == 1)", "interval": "$interval", "step": 60, "legendFormat": "Backends Up", "intervalFactor": 2, "refId": "A"}, {"expr": "count(haproxy_backend_up{backend=~\"$backend\",instance=~\"$host:$port\"} == 0)", "interval": "$interval", "step": 60, "legendFormat": "Backends Down", "intervalFactor": 2, "refId": "B"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "short", "min": null, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": null, "label": null}], "xaxis": {"buckets": null, "show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [{"color": "#890F02", "alias": "Backends Down"}, {"alias": "Backends Down", "transform": "negative-Y"}], "percentage": false, "type": "graph", "dashes": false, "dashLength": 10, "legend": {"rightSide": true, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "fieldConfig": {"overrides": [], "defaults": {"links": [], "custom": {}}}, "yaxis": {"align": false, "alignLevel": null}, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "pointradius": 5, "timeRegions": [], "decimals": 0, "options": {"alertThreshold": true}, "fillGradient": 0}, {"repeat": null, "title": "Basic General Info", "collapsed": false, "datasource": null, "gridPos": {"y": 5, "h": 1, "w": 24, "x": 0}, "panels": [], "type": "row", "id": 87}, {"bars": false, "timeFrom": null, "links": [], "hiddenSeries": false, "thresholds": [], "spaceLength": 10, "nullPointMode": "null", "pluginVersion": "7.3.4", "renderer": "flot", "gridPos": {"y": 6, "h": 10, "w": 24, "x": 0}, "linewidth": 1, "steppedLine": false, "id": 83, "fill": 2, "title": "Total responses by HTTP code", "tooltip": {"sort": 2, "shared": true, "value_type": "individual", "msResolution": true}, "stack": false, "targets": [{"expr": "sum(irate(haproxy_frontend_http_responses_total{frontend=~\"$frontend\",code=~\"$code\",instance=~\"$host:$port\"}[5m])) by (code)", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "Frontend {{ code }}", "intervalFactor": 1, "refId": "A"}, {"expr": "sum(irate(haproxy_backend_http_responses_total{backend=~\"$backend\",code=~\"$code\",instance=~\"$host:$port\"}[5m])) by (code)", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "Backend {{ code }}", "intervalFactor": 1, "refId": "B"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "short", "min": null, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"buckets": null, "show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [{"alias": "/.*Back.*/", "transform": "negative-Y"}, {"color": "#6ED0E0", "alias": "/.*1.*/"}, {"color": "#7EB26D", "alias": "/.*2.*/"}, {"color": "#1F78C1", "alias": "/.*3.*/"}, {"color": "#CCA300", "alias": "/.*4.*/"}, {"color": "#890F02", "alias": "/.*5.*/"}, {"color": "#806EB7", "alias": "/.*other.*/"}], "percentage": false, "type": "graph", "dashes": false, "description": "", "pointradius": 5, "editable": true, "grid": {}, "dashLength": 10, "legend": {"rightSide": true, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "fieldConfig": {"overrides": [], "defaults": {"links": [], "custom": {}}}, "yaxis": {"align": false, "alignLevel": null}, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "error": false, "maxPerRow": 2, "timeRegions": [], "options": {"alertThreshold": true}, "fillGradient": 0}, {"bars": false, "timeFrom": null, "links": [], "hiddenSeries": false, "thresholds": [], "spaceLength": 10, "nullPointMode": "null", "pluginVersion": "7.3.4", "renderer": "flot", "gridPos": {"y": 16, "h": 10, "w": 12, "x": 0}, "linewidth": 1, "steppedLine": false, "id": 75, "fill": 2, "title": "Current total of incoming / outgoing bytes", "tooltip": {"sort": 0, "shared": true, "value_type": "individual", "msResolution": true}, "stack": false, "targets": [{"expr": "sum(irate(haproxy_frontend_bytes_in_total{frontend=~\"$frontend\",instance=~\"$host:$port\"}[5m])*8) by (instance)", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "IN Front", "intervalFactor": 1, "refId": "A"}, {"expr": "sum(irate(haproxy_frontend_bytes_out_total{frontend=~\"$frontend\",instance=~\"$host:$port\"}[5m])*8) by (instance)", "interval": "$interval", "step": 60, "legendFormat": "OUT Front", "intervalFactor": 2, "refId": "B"}, {"intervalFactor": 2, "expr": "sum(irate(haproxy_backend_bytes_in_total{backend=~\"$backend\",instance=~\"$host:$port\"}[5m])*8) by (instance)", "step": 240, "refId": "C", "legendFormat": "IN Back"}, {"intervalFactor": 2, "expr": "sum(irate(haproxy_backend_bytes_out_total{backend=~\"$backend\",instance=~\"$host:$port\"}[5m])*8) by (instance)", "step": 240, "refId": "D", "legendFormat": "OUT Back"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "bytes", "min": null, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"buckets": null, "show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [{"alias": "/.*OUT.*/", "transform": "negative-Y"}], "percentage": false, "type": "graph", "dashes": false, "description": "", "pointradius": 5, "editable": true, "grid": {}, "dashLength": 10, "legend": {"rightSide": false, "total": false, "sideWidth": null, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "fieldConfig": {"overrides": [], "defaults": {"links": [], "custom": {}}}, "yaxis": {"align": false, "alignLevel": null}, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "error": false, "maxPerRow": 2, "timeRegions": [], "decimals": 1, "options": {"alertThreshold": true}, "fillGradient": 0}, {"bars": false, "timeFrom": null, "links": [], "hiddenSeries": false, "thresholds": [], "spaceLength": 10, "nullPointMode": "null", "pluginVersion": "7.3.4", "renderer": "flot", "gridPos": {"y": 16, "h": 10, "w": 12, "x": 12}, "linewidth": 1, "steppedLine": false, "id": 79, "fill": 2, "title": "Total number of connections", "tooltip": {"sort": 0, "shared": false, "value_type": "individual", "msResolution": true}, "stack": false, "targets": [{"expr": "sum(irate(haproxy_frontend_connections_total{frontend=~\"$frontend\",instance=~\"$host:$port\"}[5m])) by (instance)", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "Front", "intervalFactor": 1, "refId": "A"}, {"expr": "sum(irate(haproxy_backend_connections_total{backend=~\"$backend\",instance=~\"$host:$port\"}[5m])) by (instance)", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "Back", "intervalFactor": 1, "refId": "B"}, {"expr": "sum(irate(haproxy_backend_connection_errors_total{backend=~\"$backend\",instance=~\"$host:$port\"}[5m])) by (instance)", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "Back errors", "intervalFactor": 1, "refId": "C"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "short", "min": null, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"buckets": null, "show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [{"alias": "/.*Back.*/", "transform": "negative-Y"}], "percentage": false, "type": "graph", "dashes": false, "description": "", "pointradius": 5, "editable": true, "grid": {}, "dashLength": 10, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "fieldConfig": {"overrides": [], "defaults": {"links": [], "custom": {}}}, "yaxis": {"align": false, "alignLevel": null}, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "error": false, "maxPerRow": 2, "timeRegions": [], "options": {"alertThreshold": true}, "fillGradient": 0}, {"bars": false, "timeFrom": null, "links": [], "hiddenSeries": false, "thresholds": [], "spaceLength": 10, "nullPointMode": "null", "pluginVersion": "7.3.4", "renderer": "flot", "gridPos": {"y": 26, "h": 10, "w": 12, "x": 0}, "linewidth": 1, "steppedLine": false, "id": 81, "fill": 2, "title": "Total requests / responses", "tooltip": {"sort": 2, "shared": true, "value_type": "individual", "msResolution": true}, "stack": false, "targets": [{"expr": "sum(irate(haproxy_frontend_http_requests_total{frontend=~\"$frontend\",instance=~\"$host:$port\"}[5m])) by (instance)", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "Requests", "intervalFactor": 1, "refId": "A"}, {"expr": "sum(irate(haproxy_backend_response_errors_total{backend=~\"$backend\",instance=~\"$host:$port\"}[5m])) by (instance)", "interval": "$interval", "step": 60, "legendFormat": "Response errors", "intervalFactor": 2, "refId": "B"}, {"expr": "sum(irate(haproxy_frontend_request_errors_total{frontend=~\"$frontend\",instance=~\"$host:$port\"}[5m])) by (instance)", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "Requests errors", "intervalFactor": 1, "refId": "C"}, {"expr": "sum(irate(haproxy_backend_redispatch_warnings_total{backend=~\"$backend\",instance=~\"$host:$port\"}[5m])) by (instance)", "interval": "$interval", "step": 60, "legendFormat": "Backend redispatch", "intervalFactor": 2, "refId": "D"}, {"expr": "sum(irate(haproxy_backend_retry_warnings_total{backend=~\"$backend\",instance=~\"$host:$port\"}[5m])) by (instance)", "interval": "$interval", "step": 60, "legendFormat": "Backend retry", "intervalFactor": 2, "refId": "E"}, {"expr": "sum(irate(haproxy_frontend_requests_denied_total{frontend=~\"$frontend\",instance=~\"$host:$port\"}[5m])) by (instance)", "interval": "$interval", "step": 60, "legendFormat": "Request denied", "intervalFactor": 2, "refId": "F"}, {"expr": "sum(haproxy_backend_current_queue{backend=~\"$backend\",instance=~\"$host:$port\"}) by (instance)", "interval": "$interval", "step": 60, "legendFormat": "Backend Queued", "intervalFactor": 2, "refId": "G"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "short", "min": null, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"buckets": null, "show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [{"alias": "/.*Response.*/", "transform": "negative-Y"}, {"alias": "/.*Backend.*/", "transform": "negative-Y"}], "percentage": false, "type": "graph", "dashes": false, "description": "", "pointradius": 5, "editable": true, "grid": {}, "dashLength": 10, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "fieldConfig": {"overrides": [], "defaults": {"links": [], "custom": {}}}, "yaxis": {"align": false, "alignLevel": null}, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "error": false, "maxPerRow": 2, "timeRegions": [], "options": {"alertThreshold": true}, "fillGradient": 0}, {"bars": false, "timeFrom": null, "links": [], "hiddenSeries": false, "thresholds": [], "spaceLength": 10, "nullPointMode": "null", "pluginVersion": "7.3.4", "renderer": "flot", "gridPos": {"y": 26, "h": 10, "w": 12, "x": 12}, "linewidth": 1, "steppedLine": false, "id": 84, "fill": 2, "title": "Sessions", "tooltip": {"sort": 2, "shared": true, "value_type": "individual", "msResolution": true}, "stack": false, "targets": [{"expr": "sum(haproxy_frontend_current_sessions{frontend=~\"$frontend\",instance=~\"$host:$port\"}) by (instance)", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "Frontend current sessions", "intervalFactor": 1, "refId": "B"}, {"expr": "sum(haproxy_frontend_current_session_rate{frontend=~\"$frontend\",instance=~\"$host:$port\"}) by (instance)", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "Frontend current session rate", "intervalFactor": 1, "refId": "C"}, {"expr": "sum(haproxy_backend_current_sessions{backend=~\"$backend\",instance=~\"$host:$port\"}) by (instance)", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "Backend current sessions", "intervalFactor": 1, "refId": "A"}, {"expr": "sum(haproxy_backend_current_session_rate{backend=~\"$backend\",instance=~\"$host:$port\"}) by (instance)", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "Backend current session rate", "intervalFactor": 1, "refId": "D"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "short", "min": null, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"buckets": null, "show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [{"alias": "/.*Back.*/", "transform": "negative-Y"}], "percentage": false, "type": "graph", "dashes": false, "description": "", "pointradius": 5, "editable": true, "grid": {}, "dashLength": 10, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "fieldConfig": {"overrides": [], "defaults": {"links": [], "custom": {}}}, "yaxis": {"align": false, "alignLevel": null}, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "error": false, "maxPerRow": 2, "timeRegions": [], "options": {"alertThreshold": true}, "fillGradient": 0}, {"repeat": null, "title": "Throughput", "collapsed": false, "datasource": null, "gridPos": {"y": 36, "h": 1, "w": 24, "x": 0}, "panels": [], "type": "row", "id": 88}, {"bars": false, "timeFrom": null, "links": [], "hiddenSeries": false, "thresholds": [], "spaceLength": 10, "nullPointMode": "null", "pluginVersion": "7.3.4", "renderer": "flot", "gridPos": {"y": 37, "h": 11, "w": 12, "x": 0}, "linewidth": 1, "steppedLine": false, "id": 1, "fill": 2, "title": "Back - Current total of incoming / outgoing bytes", "tooltip": {"sort": 0, "shared": true, "value_type": "individual", "msResolution": true}, "stack": false, "targets": [{"expr": "irate(haproxy_backend_bytes_in_total{backend=~\"$backend\",instance=~\"$host:$port\"}[5m])*8", "metric": "haproxy_backend_", "interval": "$interval", "step": 30, "legendFormat": "IN-{{ backend }}", "intervalFactor": 1, "refId": "A"}, {"expr": "irate(haproxy_backend_bytes_out_total{backend=~\"$backend\",instance=~\"$host:$port\"}[5m])*8", "interval": "$interval", "step": 60, "legendFormat": "OUT-{{ backend }}", "intervalFactor": 2, "refId": "B"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "bytes", "min": null, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"buckets": null, "show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [{"alias": "/.*OUT.*/", "transform": "negative-Y"}], "percentage": false, "type": "graph", "dashes": false, "description": "", "pointradius": 5, "editable": true, "grid": {}, "dashLength": 10, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "fieldConfig": {"overrides": [], "defaults": {"links": [], "custom": {}}}, "yaxis": {"align": false, "alignLevel": null}, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "error": false, "maxPerRow": 2, "timeRegions": [], "decimals": 1, "fillGradient": 0}, {"bars": false, "timeFrom": null, "links": [], "hiddenSeries": false, "thresholds": [], "spaceLength": 10, "nullPointMode": "null", "pluginVersion": "7.3.4", "renderer": "flot", "gridPos": {"y": 37, "h": 11, "w": 12, "x": 12}, "linewidth": 1, "steppedLine": false, "id": 42, "fill": 2, "title": "Front - Current total of incoming / outgoing bytes", "tooltip": {"sort": 0, "shared": true, "value_type": "individual", "msResolution": true}, "stack": false, "targets": [{"expr": "irate(haproxy_frontend_bytes_in_total{frontend=~\"$frontend\",instance=~\"$host:$port\"}[5m])*8", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "IN-{{ frontend }}", "intervalFactor": 1, "refId": "A"}, {"expr": "irate(haproxy_frontend_bytes_out_total{frontend=~\"$frontend\",instance=~\"$host:$port\"}[5m])*8", "interval": "$interval", "step": 60, "legendFormat": "OUT-{{ frontend }}", "intervalFactor": 2, "refId": "B"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "bytes", "min": null, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"buckets": null, "show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [{"alias": "/.*OUT.*/", "transform": "negative-Y"}], "percentage": false, "type": "graph", "dashes": false, "description": "", "pointradius": 5, "editable": true, "grid": {}, "dashLength": 10, "legend": {"rightSide": false, "total": false, "sideWidth": null, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "fieldConfig": {"overrides": [], "defaults": {"links": [], "custom": {}}}, "yaxis": {"align": false, "alignLevel": null}, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "error": false, "maxPerRow": 2, "timeRegions": [], "decimals": 1, "fillGradient": 0}, {"repeat": null, "title": "Connections", "collapsed": false, "datasource": null, "gridPos": {"y": 48, "h": 1, "w": 24, "x": 0}, "panels": [], "type": "row", "id": 89}, {"bars": false, "timeFrom": null, "links": [], "hiddenSeries": false, "thresholds": [], "spaceLength": 10, "nullPointMode": "null", "pluginVersion": "7.3.4", "renderer": "flot", "gridPos": {"y": 49, "h": 11, "w": 12, "x": 0}, "linewidth": 1, "steppedLine": false, "id": 27, "fill": 2, "title": "Back - Total number of connections OK / Error", "tooltip": {"sort": 0, "shared": false, "value_type": "individual", "msResolution": true}, "stack": false, "targets": [{"expr": "irate(haproxy_backend_connections_total{backend=~\"$backend\",instance=~\"$host:$port\"}[5m])", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "{{ backend }}", "intervalFactor": 1, "refId": "B"}, {"intervalFactor": 2, "expr": "irate(haproxy_backend_connection_errors_total{backend=~\"$backend\",instance=~\"$host:$port\"}[5m])", "step": 240, "refId": "A", "legendFormat": "{{ backend }} Error"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "short", "min": null, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"buckets": null, "show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [{"alias": "/.*Error.*/", "transform": "negative-Y"}], "percentage": false, "type": "graph", "dashes": false, "description": "", "pointradius": 5, "editable": true, "grid": {}, "dashLength": 10, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "fieldConfig": {"overrides": [], "defaults": {"links": [], "custom": {}}}, "yaxis": {"align": false, "alignLevel": null}, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "error": false, "maxPerRow": 2, "timeRegions": [], "fillGradient": 0}, {"bars": false, "timeFrom": null, "links": [], "hiddenSeries": false, "thresholds": [], "spaceLength": 10, "nullPointMode": "null", "pluginVersion": "7.3.4", "renderer": "flot", "gridPos": {"y": 49, "h": 11, "w": 12, "x": 12}, "linewidth": 1, "steppedLine": false, "id": 43, "fill": 2, "title": "Front - Total number of connections", "tooltip": {"sort": 0, "shared": false, "value_type": "individual", "msResolution": true}, "stack": false, "targets": [{"expr": "irate(haproxy_frontend_connections_total{frontend=~\"$frontend\",instance=~\"$host:$port\"}[5m])", "metric": "haproxy_backe", "interval": "$interval", "step": 30, "legendFormat": "{{ frontend }}", "intervalFactor": 1, "refId": "B"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "short", "min": 0, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"buckets": null, "show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [], "percentage": false, "type": "graph", "dashes": false, "description": "", "pointradius": 5, "editable": true, "grid": {}, "dashLength": 10, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "fieldConfig": {"overrides": [], "defaults": {"links": [], "custom": {}}}, "yaxis": {"align": false, "alignLevel": null}, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "error": false, "maxPerRow": 2, "timeRegions": [], "fillGradient": 0}, {"repeat": null, "title": "Queue", "collapsed": false, "datasource": null, "gridPos": {"y": 60, "h": 1, "w": 24, "x": 0}, "panels": [], "type": "row", "id": 90}, {"bars": false, "timeFrom": null, "links": [], "hiddenSeries": false, "thresholds": [], "spaceLength": 10, "nullPointMode": "null", "pluginVersion": "7.3.4", "renderer": "flot", "gridPos": {"y": 61, "h": 10, "w": 12, "x": 0}, "linewidth": 1, "steppedLine": false, "id": 32, "fill": 2, "title": "Back - Maximum observed number of queued requests not assigned to any server", "tooltip": {"sort": 0, "shared": false, "value_type": "cumulative", "msResolution": true}, "stack": false, "targets": [{"expr": "irate(haproxy_backend_max_queue{backend=~\"$backend\",instance=~\"$host:$port\"}[5m])", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "{{ backend }}", "intervalFactor": 1, "refId": "A"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "short", "min": 0, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"buckets": null, "show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [], "percentage": false, "type": "graph", "dashes": false, "description": "", "pointradius": 5, "editable": true, "grid": {}, "dashLength": 10, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "fieldConfig": {"overrides": [], "defaults": {"links": [], "custom": {}}}, "yaxis": {"align": false, "alignLevel": null}, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "error": false, "maxPerRow": 2, "timeRegions": [], "fillGradient": 0}, {"bars": false, "timeFrom": null, "links": [], "hiddenSeries": false, "thresholds": [], "spaceLength": 10, "nullPointMode": "null", "pluginVersion": "7.3.4", "renderer": "flot", "gridPos": {"y": 61, "h": 10, "w": 12, "x": 12}, "linewidth": 1, "steppedLine": false, "id": 28, "fill": 2, "title": "Back - Current number of queued requests not assigned to any server", "tooltip": {"sort": 0, "shared": false, "value_type": "cumulative", "msResolution": true}, "stack": false, "targets": [{"expr": "haproxy_backend_current_queue{backend=~\"$backend\",instance=~\"$host:$port\"}", "metric": "haproxy_backend_current_queue", "interval": "$interval", "step": 30, "legendFormat": "{{ backend }}", "intervalFactor": 1, "refId": "A"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "short", "min": 0, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"buckets": null, "show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [], "percentage": false, "type": "graph", "dashes": false, "description": "", "pointradius": 5, "editable": true, "grid": {}, "dashLength": 10, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "fieldConfig": {"overrides": [], "defaults": {"links": [], "custom": {}}}, "yaxis": {"align": false, "alignLevel": null}, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "error": false, "maxPerRow": 2, "timeRegions": [], "fillGradient": 0}, {"repeat": null, "title": "Requests / Responses", "collapsed": false, "datasource": null, "gridPos": {"y": 71, "h": 1, "w": 24, "x": 0}, "panels": [], "type": "row", "id": 91}, {"bars": false, "timeFrom": null, "links": [], "hiddenSeries": false, "thresholds": [], "spaceLength": 10, "nullPointMode": "null", "pluginVersion": "7.3.4", "renderer": "flot", "gridPos": {"y": 72, "h": 12, "w": 12, "x": 0}, "linewidth": 1, "steppedLine": false, "id": 35, "fill": 2, "title": "Back - Total of redispatch / error / retry warnings", "tooltip": {"sort": 2, "shared": true, "value_type": "individual", "msResolution": true}, "stack": false, "targets": [{"expr": "irate(haproxy_backend_redispatch_warnings_total{backend=~\"$backend\", instance=~\"$host:$port\"}[5m])", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "Redispatch {{ backend }}", "intervalFactor": 1, "refId": "A"}, {"expr": "irate(haproxy_backend_retry_warnings_total{backend=~\"$backend\", instance=~\"$host:$port\"}[5m])", "interval": "$interval", "step": 60, "legendFormat": "Retry {{ backend }}", "intervalFactor": 2, "refId": "B"}, {"intervalFactor": 2, "expr": "irate(haproxy_backend_response_errors_total{backend=~\"$backend\", instance=~\"$host:$port\"}[5m])", "step": 240, "refId": "C", "legendFormat": "Error {{ backend }}"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "short", "min": null, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"buckets": null, "show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [{"alias": "/.*Error.*/", "transform": "negative-Y"}], "percentage": false, "type": "graph", "dashes": false, "description": "", "pointradius": 5, "editable": true, "grid": {}, "dashLength": 10, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "hideEmpty": false, "values": true, "alignAsTable": true, "avg": true, "hideZero": false}, "fieldConfig": {"overrides": [], "defaults": {"links": [], "custom": {}}}, "yaxis": {"align": false, "alignLevel": null}, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "error": false, "maxPerRow": 2, "timeRegions": [], "fillGradient": 0}, {"bars": false, "timeFrom": null, "links": [], "hiddenSeries": false, "thresholds": [], "spaceLength": 10, "nullPointMode": "null", "pluginVersion": "7.3.4", "renderer": "flot", "gridPos": {"y": 72, "h": 12, "w": 12, "x": 12}, "linewidth": 1, "steppedLine": false, "id": 46, "fill": 2, "title": "Front - Total HTTP requests OK / Error / Denied", "tooltip": {"sort": 2, "shared": true, "value_type": "individual", "msResolution": true}, "stack": false, "targets": [{"expr": "irate(haproxy_frontend_http_requests_total{frontend=~\"$frontend\",instance=~\"$host:$port\"}[5m])", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "{{ frontend }}", "intervalFactor": 1, "refId": "A"}, {"intervalFactor": 2, "expr": "irate(haproxy_frontend_request_errors_total{frontend=~\"$frontend\", instance=~\"$host:$port\"}[5m])", "step": 240, "refId": "B", "legendFormat": "{{ frontend }} Error"}, {"intervalFactor": 2, "expr": "irate(haproxy_frontend_requests_denied_total{frontend=~\"$frontend\", instance=~\"$host:$port\"}[5m])", "step": 240, "refId": "C", "legendFormat": "{{ frontend }} Denied"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "short", "min": null, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"buckets": null, "show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [{"alias": "/.*Error.*/", "transform": "negative-Y"}, {"alias": "/.*Denied.*/", "transform": "negative-Y"}], "percentage": false, "type": "graph", "dashes": false, "description": "", "pointradius": 5, "editable": true, "grid": {}, "dashLength": 10, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "fieldConfig": {"overrides": [], "defaults": {"links": [], "custom": {}}}, "yaxis": {"align": false, "alignLevel": null}, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "error": false, "maxPerRow": 1, "timeRegions": [], "fillGradient": 0}, {"repeat": null, "title": "Responses by HTTP code", "collapsed": false, "datasource": null, "gridPos": {"y": 84, "h": 1, "w": 24, "x": 0}, "panels": [], "type": "row", "id": 92}, {"bars": false, "timeFrom": null, "links": [], "hiddenSeries": false, "thresholds": [], "spaceLength": 10, "nullPointMode": "null", "pluginVersion": "7.3.4", "renderer": "flot", "gridPos": {"y": 85, "h": 11, "w": 12, "x": 0}, "linewidth": 1, "steppedLine": false, "id": 24, "fill": 2, "title": "Back - Total of HTTP responses", "tooltip": {"sort": 2, "shared": true, "value_type": "individual", "msResolution": true}, "stack": false, "targets": [{"expr": "irate(haproxy_backend_http_responses_total{backend=~\"$backend\", code=~\"$code\",instance=~\"$host:$port\"}[5m])", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "{{ code }} {{ backend }}", "intervalFactor": 1, "refId": "A"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "short", "min": 0, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"buckets": null, "show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [], "percentage": false, "type": "graph", "dashes": false, "description": "", "pointradius": 5, "editable": true, "grid": {}, "dashLength": 10, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "fieldConfig": {"overrides": [], "defaults": {"links": [], "custom": {}}}, "yaxis": {"align": false, "alignLevel": null}, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "error": false, "maxPerRow": 2, "timeRegions": [], "fillGradient": 0}, {"bars": false, "timeFrom": null, "links": [], "hiddenSeries": false, "thresholds": [], "spaceLength": 10, "nullPointMode": "null", "pluginVersion": "7.3.4", "renderer": "flot", "gridPos": {"y": 85, "h": 11, "w": 12, "x": 12}, "linewidth": 1, "steppedLine": false, "id": 47, "fill": 2, "title": "Front - Total of HTTP responses", "tooltip": {"sort": 2, "shared": true, "value_type": "individual", "msResolution": true}, "stack": false, "targets": [{"expr": "irate(haproxy_frontend_http_responses_total{frontend=~\"$frontend\", code=~\"$code\",instance=~\"$host:$port\"}[5m])", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "{{ code }} {{ frontend }} ", "intervalFactor": 1, "refId": "A"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "short", "min": 0, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"buckets": null, "show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [], "percentage": false, "type": "graph", "dashes": false, "description": "", "pointradius": 5, "editable": true, "grid": {}, "dashLength": 10, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "fieldConfig": {"overrides": [], "defaults": {"links": [], "custom": {}}}, "yaxis": {"align": false, "alignLevel": null}, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "error": false, "maxPerRow": 2, "timeRegions": [], "fillGradient": 0}, {"repeat": null, "title": "Sessions", "collapsed": false, "datasource": null, "gridPos": {"y": 96, "h": 1, "w": 24, "x": 0}, "panels": [], "type": "row", "id": 93}, {"bars": false, "timeFrom": null, "links": [], "hiddenSeries": false, "thresholds": [], "spaceLength": 10, "nullPointMode": "null", "pluginVersion": "7.3.4", "renderer": "flot", "gridPos": {"y": 97, "h": 10, "w": 12, "x": 0}, "linewidth": 1, "steppedLine": false, "id": 30, "fill": 2, "title": "Back - Current number of active sessions", "tooltip": {"sort": 0, "shared": false, "value_type": "individual", "msResolution": true}, "stack": false, "targets": [{"hide": false, "expr": "haproxy_backend_current_sessions{backend=~\"$backend\",instance=~\"$host:$port\"}", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "{{ backend }}", "intervalFactor": 1, "refId": "A"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "short", "min": 0, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"buckets": null, "show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [], "percentage": false, "type": "graph", "dashes": false, "description": "", "pointradius": 5, "editable": true, "grid": {}, "dashLength": 10, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "fieldConfig": {"overrides": [], "defaults": {"links": [], "custom": {}}}, "yaxis": {"align": false, "alignLevel": null}, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "error": false, "maxPerRow": 2, "timeRegions": [], "fillGradient": 0}, {"bars": false, "timeFrom": null, "links": [], "hiddenSeries": false, "thresholds": [], "spaceLength": 10, "nullPointMode": "null", "pluginVersion": "7.3.4", "renderer": "flot", "gridPos": {"y": 97, "h": 10, "w": 12, "x": 12}, "linewidth": 1, "steppedLine": false, "id": 45, "fill": 2, "title": "Front - Current number of active sessions", "tooltip": {"sort": 0, "shared": false, "value_type": "individual", "msResolution": true}, "stack": false, "targets": [{"hide": false, "expr": "haproxy_frontend_current_sessions{frontend=~\"$frontend\",instance=~\"$host:$port\"}", "metric": "haproxy_backend_current_queue", "interval": "$interval", "step": 30, "legendFormat": "{{ frontend }}", "intervalFactor": 1, "refId": "A"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "short", "min": 0, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"buckets": null, "show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [], "percentage": false, "type": "graph", "dashes": false, "description": "", "pointradius": 5, "editable": true, "grid": {}, "dashLength": 10, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "fieldConfig": {"overrides": [], "defaults": {"links": [], "custom": {}}}, "yaxis": {"align": false, "alignLevel": null}, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "error": false, "maxPerRow": 2, "timeRegions": [], "fillGradient": 0}, {"bars": false, "timeFrom": null, "links": [], "hiddenSeries": false, "thresholds": [], "spaceLength": 10, "nullPointMode": "null", "pluginVersion": "7.3.4", "renderer": "flot", "gridPos": {"y": 107, "h": 10, "w": 12, "x": 0}, "linewidth": 1, "steppedLine": false, "id": 29, "fill": 2, "title": "Back - Current number of sessions rate per second over last elapsed second", "tooltip": {"sort": 0, "shared": false, "value_type": "individual", "msResolution": true}, "stack": false, "targets": [{"expr": "haproxy_backend_current_session_rate{backend=~\"$backend\",instance=~\"$host:$port\"}", "metric": "haproxy_backend_current_queue", "interval": "$interval", "step": 30, "legendFormat": "{{ backend }}", "intervalFactor": 1, "refId": "A"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "short", "min": 0, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"buckets": null, "show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [], "percentage": false, "type": "graph", "dashes": false, "description": "", "pointradius": 5, "editable": true, "grid": {}, "dashLength": 10, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "fieldConfig": {"overrides": [], "defaults": {"links": [], "custom": {}}}, "yaxis": {"align": false, "alignLevel": null}, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "error": false, "maxPerRow": 2, "timeRegions": [], "fillGradient": 0}, {"bars": false, "timeFrom": null, "links": [], "hiddenSeries": false, "thresholds": [], "spaceLength": 10, "nullPointMode": "null", "pluginVersion": "7.3.4", "renderer": "flot", "gridPos": {"y": 107, "h": 10, "w": 12, "x": 12}, "linewidth": 1, "steppedLine": false, "id": 44, "fill": 2, "title": "Front - Current number of sessions rate per second over last elapsed second", "tooltip": {"sort": 0, "shared": false, "value_type": "individual", "msResolution": true}, "stack": false, "targets": [{"expr": "haproxy_frontend_current_session_rate{frontend=~\"$frontend\",instance=~\"$host:$port\"}", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "{{ frontend }}", "intervalFactor": 1, "refId": "A"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "short", "min": 0, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"buckets": null, "show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [], "percentage": false, "type": "graph", "dashes": false, "description": "", "pointradius": 5, "editable": true, "grid": {}, "dashLength": 10, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "fieldConfig": {"overrides": [], "defaults": {"links": [], "custom": {}}}, "yaxis": {"align": false, "alignLevel": null}, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "error": false, "maxPerRow": 2, "timeRegions": [], "fillGradient": 0}, {"bars": false, "timeFrom": null, "links": [], "hiddenSeries": false, "thresholds": [], "spaceLength": 10, "nullPointMode": "null", "pluginVersion": "7.3.4", "renderer": "flot", "gridPos": {"y": 117, "h": 10, "w": 12, "x": 0}, "linewidth": 2, "steppedLine": false, "id": 34, "fill": 1, "title": "Back - Maximum observed number of active sessions and limit", "tooltip": {"sort": 0, "shared": false, "value_type": "individual", "msResolution": true}, "stack": false, "targets": [{"hide": false, "expr": "haproxy_backend_max_sessions{backend=~\"$backend\",instance=~\"$host:$port\"}", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "{{ backend }}", "intervalFactor": 1, "refId": "A"}, {"intervalFactor": 2, "expr": "haproxy_backend_limit_sessions{backend=~\"$backend\",instance=~\"$host:$port\"}", "step": 120, "refId": "B", "legendFormat": "{{ backend }} limit"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "short", "min": 0, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"buckets": null, "show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [{"alias": "/.*limit.*/", "fill": 0}], "percentage": false, "type": "graph", "dashes": false, "description": "", "pointradius": 5, "editable": true, "grid": {}, "dashLength": 10, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "fieldConfig": {"overrides": [], "defaults": {"links": [], "custom": {}}}, "yaxis": {"align": false, "alignLevel": null}, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "error": false, "maxPerRow": 4, "timeRegions": [], "fillGradient": 0}, {"bars": false, "timeFrom": null, "links": [], "hiddenSeries": false, "thresholds": [], "spaceLength": 10, "nullPointMode": "null", "pluginVersion": "7.3.4", "renderer": "flot", "gridPos": {"y": 117, "h": 10, "w": 12, "x": 12}, "linewidth": 1, "steppedLine": false, "id": 51, "fill": 2, "title": "Front - Maximum observed number of active sessions and limit", "tooltip": {"sort": 0, "shared": false, "value_type": "individual", "msResolution": true}, "stack": true, "targets": [{"hide": false, "expr": "haproxy_frontend_max_sessions{frontend=~\"$frontend\",instance=~\"$host:$port\"}", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "{{ frontend }}", "intervalFactor": 1, "refId": "A"}, {"intervalFactor": 2, "expr": "haproxy_frontend_limit_sessions{frontend=~\"$frontend\",instance=~\"$host:$port\"}", "step": 120, "refId": "B", "legendFormat": "{{ frontend }} limit"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "short", "min": 0, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"buckets": null, "show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [{"alias": "/.*limit.*/", "fill": 0}], "percentage": false, "type": "graph", "dashes": false, "description": "", "pointradius": 5, "editable": true, "grid": {}, "dashLength": 10, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "fieldConfig": {"overrides": [], "defaults": {"links": [], "custom": {}}}, "yaxis": {"align": false, "alignLevel": null}, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "error": false, "maxPerRow": 4, "timeRegions": [], "fillGradient": 0}, {"bars": false, "timeFrom": null, "links": [], "hiddenSeries": false, "thresholds": [], "spaceLength": 10, "nullPointMode": "null", "pluginVersion": "7.3.4", "renderer": "flot", "gridPos": {"y": 127, "h": 10, "w": 12, "x": 0}, "linewidth": 1, "steppedLine": false, "id": 33, "fill": 2, "title": "Back - Maximum number of sessions rate per second", "tooltip": {"sort": 0, "shared": false, "value_type": "individual", "msResolution": true}, "stack": false, "targets": [{"hide": false, "expr": "haproxy_backend_max_session_rate{backend=~\"$backend\",instance=~\"$host:$port\"}", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "{{ backend }}", "intervalFactor": 1, "refId": "A"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "short", "min": 0, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"buckets": null, "show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [], "percentage": false, "type": "graph", "dashes": false, "description": "", "pointradius": 5, "editable": true, "grid": {}, "dashLength": 10, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "fieldConfig": {"overrides": [], "defaults": {"links": [], "custom": {}}}, "yaxis": {"align": false, "alignLevel": null}, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "error": false, "maxPerRow": 2, "timeRegions": [], "fillGradient": 0}, {"bars": false, "timeFrom": null, "links": [], "hiddenSeries": false, "thresholds": [], "spaceLength": 10, "nullPointMode": "null", "pluginVersion": "7.3.4", "renderer": "flot", "gridPos": {"y": 127, "h": 10, "w": 12, "x": 12}, "linewidth": 1, "steppedLine": false, "id": 69, "fill": 2, "title": "Front - Maximum number of sessions rate per second and limit", "tooltip": {"sort": 0, "shared": false, "value_type": "individual", "msResolution": true}, "stack": false, "targets": [{"hide": false, "expr": "haproxy_frontend_max_session_rate{frontend=~\"$frontend\",instance=~\"$host:$port\"}", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "{{ frontend }}", "intervalFactor": 1, "refId": "A"}, {"intervalFactor": 2, "expr": "haproxy_frontend_limit_session_rate{frontend=~\"$frontend\",instance=~\"$host:$port\"}", "step": 120, "refId": "B", "legendFormat": "{{ frontend }} limit"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "short", "min": 0, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"buckets": null, "show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [{"alias": "/.*limit.*/", "fill": 0}], "percentage": false, "type": "graph", "dashes": false, "description": "", "pointradius": 5, "editable": true, "grid": {}, "dashLength": 10, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "fieldConfig": {"overrides": [], "defaults": {"links": [], "custom": {}}}, "yaxis": {"align": false, "alignLevel": null}, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "error": false, "maxPerRow": 3, "timeRegions": [], "fillGradient": 0}, {"repeat": null, "title": "Health and Weight", "collapsed": true, "datasource": null, "gridPos": {"y": 137, "h": 1, "w": 24, "x": 0}, "panels": [{"bars": false, "timeFrom": null, "links": [], "thresholds": [], "nullPointMode": "null", "renderer": "flot", "gridPos": {"y": 73, "h": 9, "w": 12, "x": 0}, "linewidth": 1, "steppedLine": false, "id": 38, "fill": 2, "title": "Back - Current health status of the backend", "tooltip": {"sort": 1, "shared": true, "value_type": "individual", "msResolution": true}, "stack": false, "targets": [{"expr": "haproxy_backend_up{backend=~\"$backend\", instance=~\"$host:$port\"}", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "{{ backend }}", "intervalFactor": 1, "refId": "A"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "short", "min": 0, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [], "percentage": false, "type": "graph", "transparent": false, "description": "", "error": false, "editable": true, "grid": {}, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "pointradius": 5, "maxPerRow": 2, "decimals": 0}, {"bars": false, "timeFrom": null, "links": [], "thresholds": [], "nullPointMode": "null", "renderer": "flot", "gridPos": {"y": 73, "h": 9, "w": 12, "x": 12}, "linewidth": 1, "steppedLine": false, "id": 39, "fill": 2, "title": "Back - Total weight of the servers in the backend / Active servers backend", "tooltip": {"sort": 1, "shared": true, "value_type": "individual", "msResolution": true}, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "targets": [{"expr": "haproxy_backend_weight{backend=~\"$backend\", instance=~\"$host:$port\"}", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "{{ backend }}", "intervalFactor": 1, "refId": "A"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "short", "min": 0, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [], "percentage": false, "type": "graph", "transparent": false, "description": "", "error": false, "editable": true, "grid": {}, "stack": false, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "pointradius": 5, "maxPerRow": 2}], "type": "row", "id": 94}, {"repeat": null, "title": "By Server Throughput", "collapsed": true, "datasource": null, "gridPos": {"y": 138, "h": 1, "w": 24, "x": 0}, "panels": [{"bars": false, "timeFrom": null, "links": [], "thresholds": [], "nullPointMode": "null", "renderer": "flot", "gridPos": {"y": 74, "h": 15, "w": 24, "x": 0}, "linewidth": 1, "steppedLine": false, "id": 54, "fill": 2, "title": "Server - Current total of incoming / outgoing bytes", "tooltip": {"sort": 0, "shared": true, "value_type": "individual", "msResolution": true}, "stack": false, "targets": [{"expr": "irate(haproxy_server_bytes_in_total{backend=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}[5m])*8", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "IN-{{ backend }} / {{ server }}", "intervalFactor": 1, "refId": "A"}, {"expr": "irate(haproxy_server_bytes_out_total{backend=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}[5m])*8", "interval": "$interval", "step": 60, "legendFormat": "OUT-{{ backend }} / {{ server }}", "intervalFactor": 2, "refId": "B"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "bytes", "min": null, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [{"alias": "/.*OUT.*/", "transform": "negative-Y"}], "percentage": false, "type": "graph", "description": "", "error": false, "editable": true, "grid": {}, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "pointradius": 5, "maxPerRow": 1, "decimals": 1}], "type": "row", "id": 95}, {"repeat": null, "title": "By Server Connections", "collapsed": true, "datasource": null, "gridPos": {"y": 139, "h": 1, "w": 24, "x": 0}, "panels": [{"bars": false, "timeFrom": null, "links": [], "thresholds": [], "nullPointMode": "null", "renderer": "flot", "gridPos": {"y": 75, "h": 12, "w": 24, "x": 0}, "linewidth": 1, "steppedLine": false, "id": 58, "fill": 2, "title": "Server - Total number of connections", "tooltip": {"sort": 0, "shared": false, "value_type": "individual", "msResolution": true}, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "targets": [{"expr": "irate(haproxy_server_connections_total{backend=~\"$backend\",instance=~\"$host:$port\"}[5m])", "metric": "haproxy_backe", "interval": "$interval", "step": 30, "legendFormat": "{{ backend }} / {{ server }}", "intervalFactor": 1, "refId": "B"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "none", "min": 0, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [], "percentage": false, "type": "graph", "description": "", "error": false, "editable": true, "grid": {}, "stack": false, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "pointradius": 5, "maxPerRow": 1}], "type": "row", "id": 96}, {"repeat": null, "title": "By Server Queue", "collapsed": true, "datasource": null, "gridPos": {"y": 140, "h": 1, "w": 24, "x": 0}, "panels": [{"bars": false, "timeFrom": null, "links": [], "thresholds": [], "nullPointMode": "null", "renderer": "flot", "gridPos": {"y": 76, "h": 11, "w": 12, "x": 0}, "linewidth": 1, "steppedLine": false, "id": 65, "fill": 2, "title": "Server - Maximum observed number of queued requests assigned to this server", "tooltip": {"sort": 0, "shared": false, "value_type": "cumulative", "msResolution": true}, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "targets": [{"expr": "irate(haproxy_server_max_queue{backend=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}[5m])", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "{{ backend }} / {{ server }}", "intervalFactor": 1, "refId": "A"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "short", "min": 0, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [], "percentage": false, "type": "graph", "description": "", "error": false, "editable": true, "grid": {}, "stack": false, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "pointradius": 5, "maxPerRow": 2}, {"bars": false, "timeFrom": null, "links": [], "thresholds": [], "nullPointMode": "null", "renderer": "flot", "gridPos": {"y": 76, "h": 11, "w": 12, "x": 12}, "linewidth": 1, "steppedLine": false, "id": 59, "fill": 2, "title": "Server - Current number of queued requests assigned to this server", "tooltip": {"sort": 0, "shared": false, "value_type": "cumulative", "msResolution": true}, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "targets": [{"expr": "irate(haproxy_server_current_queue{backend=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}[5m])", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "{{ backend }} / {{ server }}", "intervalFactor": 1, "refId": "A"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "short", "min": 0, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [], "percentage": false, "type": "graph", "description": "", "error": false, "editable": true, "grid": {}, "stack": false, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "pointradius": 5, "maxPerRow": 2}], "type": "row", "id": 97}, {"repeat": null, "title": "By Server Requests / Responses", "collapsed": true, "datasource": null, "gridPos": {"y": 141, "h": 1, "w": 24, "x": 0}, "panels": [{"bars": false, "timeFrom": null, "links": [], "thresholds": [], "nullPointMode": "null", "renderer": "flot", "gridPos": {"y": 77, "h": 13, "w": 12, "x": 0}, "linewidth": 1, "steppedLine": false, "id": 74, "fill": 2, "title": "Server - Total of HTTP responses OK", "tooltip": {"sort": 2, "shared": true, "value_type": "individual", "msResolution": true}, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "targets": [{"expr": "sum(irate(haproxy_server_http_responses_total{backend=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}[5m])) by (server)", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "{{ backend }} {{ server }}", "intervalFactor": 1, "refId": "A"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "short", "min": "0", "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [{"alias": "/.*Error.*/", "transform": "negative-Y"}], "percentage": false, "type": "graph", "transparent": false, "error": false, "editable": true, "grid": {}, "stack": false, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "pointradius": 5, "maxPerRow": 2}, {"bars": false, "timeFrom": null, "links": [], "thresholds": [], "nullPointMode": "null", "renderer": "flot", "gridPos": {"y": 77, "h": 13, "w": 12, "x": 12}, "linewidth": 1, "steppedLine": false, "id": 71, "fill": 2, "title": "Server - Total of retry / error / redispatch warnings", "tooltip": {"sort": 2, "shared": true, "value_type": "individual", "msResolution": true}, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "hideEmpty": false, "values": true, "alignAsTable": true, "avg": true, "hideZero": false}, "targets": [{"hide": false, "expr": "irate(haproxy_server_retry_warnings_total{backend=~\"$backend\", instance=~\"$host:$port\"}[5m])", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "Retry {{ backend }} {{ server }}", "intervalFactor": 1, "refId": "A"}, {"hide": false, "expr": "haproxy_server_redispatch_warnings_total{backend=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}", "interval": "$interval", "step": 60, "legendFormat": "Redispatch {{ backend }} {{ server }}", "intervalFactor": 2, "refId": "B"}, {"hide": false, "expr": "irate(haproxy_server_response_errors_total{backend=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}[5m])", "interval": "$interval", "step": 60, "legendFormat": "Error {{ backend }} {{ server }}", "intervalFactor": 2, "refId": "C"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "short", "min": null, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [{"alias": "/.*Error.*/", "transform": "negative-Y"}], "percentage": false, "type": "graph", "description": "", "error": false, "editable": true, "grid": {}, "stack": false, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "pointradius": 5, "maxPerRow": 2}], "type": "row", "id": 98}, {"repeat": null, "title": "By Server Responses by HTTP code", "collapsed": true, "datasource": null, "gridPos": {"y": 142, "h": 1, "w": 24, "x": 0}, "panels": [{"bars": false, "timeFrom": null, "links": [], "thresholds": [], "nullPointMode": "null", "renderer": "flot", "gridPos": {"y": 78, "h": 11, "w": 24, "x": 0}, "linewidth": 1, "steppedLine": false, "id": 64, "fill": 2, "title": "Server - Total of HTTP responses", "tooltip": {"sort": 2, "shared": true, "value_type": "individual", "msResolution": true}, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "targets": [{"expr": "irate(haproxy_server_http_responses_total{backend=~\"$backend\",server=~\"$server\",code=~\"$code\",instance=~\"$host:$port\"}[5m])", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "{{ backend }} {{ server }} {{ code }}", "intervalFactor": 1, "refId": "A"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "short", "min": 0, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [], "percentage": false, "type": "graph", "transparent": false, "error": false, "editable": true, "grid": {}, "height": "400px", "stack": false, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "pointradius": 5, "maxPerRow": 2}], "type": "row", "id": 99}, {"repeat": null, "title": "By Server Sessions", "collapsed": true, "datasource": null, "gridPos": {"y": 143, "h": 1, "w": 24, "x": 0}, "panels": [{"bars": false, "timeFrom": null, "links": [], "thresholds": [], "nullPointMode": "null", "renderer": "flot", "gridPos": {"y": 79, "h": 10, "w": 12, "x": 0}, "linewidth": 1, "steppedLine": false, "id": 61, "fill": 2, "title": "Server - Current number of active sessions", "tooltip": {"sort": 0, "shared": false, "value_type": "individual", "msResolution": true}, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "targets": [{"expr": "haproxy_server_current_sessions{backend=~\"$backend\",instance=~\"$host:$port\"}", "metric": "haproxy_backend_current_queue", "interval": "$interval", "step": 30, "legendFormat": "{{ backend }} / {{ server }}", "intervalFactor": 1, "refId": "A"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "short", "min": 0, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [], "percentage": false, "type": "graph", "description": "", "error": false, "editable": true, "grid": {}, "stack": false, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "pointradius": 5, "maxPerRow": 2}, {"bars": false, "timeFrom": null, "links": [], "thresholds": [], "nullPointMode": "null", "renderer": "flot", "gridPos": {"y": 79, "h": 10, "w": 12, "x": 12}, "linewidth": 1, "steppedLine": false, "id": 60, "fill": 2, "title": "Server - Current number of sessions rate per second over last elapsed second", "tooltip": {"sort": 0, "shared": false, "value_type": "individual", "msResolution": true}, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "targets": [{"expr": "haproxy_server_current_session_rate{backend=~\"$backend\",instance=~\"$host:$port\"}", "metric": "haproxy_backend_current_queue", "interval": "$interval", "step": 30, "legendFormat": "{{ backend }} / {{ server }}", "intervalFactor": 1, "refId": "A"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "short", "min": 0, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [], "percentage": false, "type": "graph", "description": "", "error": false, "editable": true, "grid": {}, "stack": true, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "pointradius": 5, "maxPerRow": 2}, {"bars": false, "timeFrom": null, "links": [], "thresholds": [], "nullPointMode": "null", "renderer": "flot", "gridPos": {"y": 89, "h": 10, "w": 12, "x": 0}, "linewidth": 1, "steppedLine": false, "id": 66, "fill": 2, "title": "Server - Maximum observed number of sessions rate per second", "tooltip": {"sort": 0, "shared": false, "value_type": "individual", "msResolution": true}, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "targets": [{"expr": "haproxy_server_max_session_rate{backend=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "{{ backend }} / {{ server }}", "intervalFactor": 1, "refId": "A"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "short", "min": 0, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [], "percentage": false, "type": "graph", "description": "", "error": false, "editable": true, "grid": {}, "stack": false, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "pointradius": 5, "maxPerRow": 2}, {"bars": false, "timeFrom": null, "links": [], "thresholds": [], "nullPointMode": "null", "renderer": "flot", "gridPos": {"y": 89, "h": 10, "w": 12, "x": 12}, "linewidth": 1, "steppedLine": false, "id": 67, "fill": 2, "title": "Server - Maximum observed number of active sessions", "tooltip": {"sort": 0, "shared": false, "value_type": "individual", "msResolution": true}, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "targets": [{"expr": "haproxy_server_max_sessions{backend=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "{{ backend }} / {{ server }}", "intervalFactor": 1, "refId": "A"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "short", "min": 0, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [], "percentage": false, "type": "graph", "description": "", "error": false, "editable": true, "grid": {}, "stack": false, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "pointradius": 5, "maxPerRow": 2}], "type": "row", "id": 100}, {"repeat": null, "title": "By Server Health Weight", "collapsed": true, "datasource": null, "gridPos": {"y": 144, "h": 1, "w": 24, "x": 0}, "panels": [{"bars": false, "timeFrom": null, "links": [], "thresholds": [], "nullPointMode": "null", "renderer": "flot", "gridPos": {"y": 90, "h": 13, "w": 12, "x": 0}, "linewidth": 1, "steppedLine": false, "id": 62, "fill": 2, "title": "Server - Total downtime in seconds", "tooltip": {"sort": 0, "shared": false, "value_type": "individual", "msResolution": true}, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "targets": [{"expr": "haproxy_server_downtime_seconds_total{backend=~\"$backend\",instance=~\"$host:$port\"}", "metric": "haproxy_backend_current_queue", "interval": "$interval", "step": 30, "legendFormat": "{{ backend }} / {{ server }}", "intervalFactor": 1, "refId": "A"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "s", "min": 0, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [], "percentage": false, "type": "graph", "description": "", "error": false, "editable": true, "grid": {}, "stack": false, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "pointradius": 5, "maxPerRow": 1}, {"bars": false, "timeFrom": null, "links": [], "thresholds": [], "nullPointMode": "null", "renderer": "flot", "gridPos": {"y": 90, "h": 13, "w": 12, "x": 12}, "linewidth": 1, "steppedLine": false, "id": 56, "fill": 2, "title": "Server - Total number of failed health checks", "tooltip": {"sort": 0, "shared": true, "value_type": "individual", "msResolution": true}, "stack": false, "targets": [{"expr": "increase(haproxy_server_check_failures_total{backend=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}[5m])", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "{{ backend }} / {{ server }}", "intervalFactor": 1, "refId": "A"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "none", "min": null, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [], "percentage": false, "type": "graph", "description": "", "error": false, "editable": true, "grid": {}, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "pointradius": 5, "maxPerRow": 1, "decimals": 1}, {"bars": false, "timeFrom": null, "links": [], "thresholds": [], "nullPointMode": "null", "renderer": "flot", "gridPos": {"y": 103, "h": 13, "w": 12, "x": 0}, "linewidth": 1, "steppedLine": false, "id": 57, "fill": 2, "title": "Server - Total of connection errors", "tooltip": {"sort": 0, "shared": true, "value_type": "individual", "msResolution": true}, "stack": false, "targets": [{"expr": "irate(haproxy_server_connection_errors_total{backend=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}[5m])", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "{{ backend }} / {{ server }}", "intervalFactor": 1, "refId": "A"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "none", "min": "0", "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [], "percentage": false, "type": "graph", "description": "", "error": false, "editable": true, "grid": {}, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "pointradius": 5, "maxPerRow": 1, "decimals": 0}, {"bars": false, "timeFrom": null, "links": [], "thresholds": [], "nullPointMode": "null", "renderer": "flot", "gridPos": {"y": 103, "h": 13, "w": 12, "x": 12}, "linewidth": 1, "steppedLine": false, "id": 55, "fill": 2, "title": "Server - Previously run health check duration, in milliseconds", "tooltip": {"sort": 0, "shared": true, "value_type": "individual", "msResolution": true}, "stack": false, "targets": [{"expr": "haproxy_server_check_duration_milliseconds{backend=~\"$backend\",server=~\"$server\",instance=~\"$host:$port\"}", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "{{ backend }} / {{ server }}", "intervalFactor": 1, "refId": "A"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "ms", "min": null, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [], "percentage": false, "type": "graph", "description": "", "error": false, "editable": true, "grid": {}, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "pointradius": 5, "maxPerRow": 1, "decimals": 1}, {"bars": false, "timeFrom": null, "links": [], "thresholds": [], "nullPointMode": "null", "renderer": "flot", "gridPos": {"y": 116, "h": 13, "w": 12, "x": 0}, "linewidth": 1, "steppedLine": false, "id": 72, "fill": 2, "title": "Server - Current health status of the server", "tooltip": {"sort": 0, "shared": false, "value_type": "individual", "msResolution": true}, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "targets": [{"expr": "haproxy_server_up{backend=~\"$backend\",instance=~\"$host:$port\"}", "metric": "haproxy_backend_current_queue", "interval": "$interval", "step": 30, "legendFormat": "{{ backend }} / {{ server }}", "intervalFactor": 1, "refId": "A"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "none", "min": 0, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [], "percentage": false, "type": "graph", "description": "", "error": false, "editable": true, "grid": {}, "stack": false, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "pointradius": 5, "maxPerRow": 2}, {"bars": false, "timeFrom": null, "links": [], "thresholds": [], "nullPointMode": "null", "renderer": "flot", "gridPos": {"y": 116, "h": 13, "w": 12, "x": 12}, "linewidth": 1, "steppedLine": false, "id": 73, "fill": 2, "title": "Server - Current weight of the server", "tooltip": {"sort": 0, "shared": false, "value_type": "individual", "msResolution": true}, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "targets": [{"expr": "haproxy_server_weight{backend=~\"$backend\",instance=~\"$host:$port\"}", "metric": "haproxy_backend_current_queue", "interval": "$interval", "step": 30, "legendFormat": "{{ backend }} / {{ server }}", "intervalFactor": 1, "refId": "A"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "none", "min": 0, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [], "percentage": false, "type": "graph", "description": "", "error": false, "editable": true, "grid": {}, "stack": false, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "pointradius": 5, "maxPerRow": 2}], "type": "row", "id": 101}, {"repeat": null, "title": "Scrape info", "collapsed": true, "datasource": null, "gridPos": {"y": 145, "h": 1, "w": 24, "x": 0}, "panels": [{"bars": false, "timeFrom": null, "links": [], "thresholds": [], "nullPointMode": "null", "renderer": "flot", "gridPos": {"y": 117, "h": 7, "w": 12, "x": 0}, "linewidth": 2, "steppedLine": false, "id": 40, "fill": 1, "title": "Number of errors while parsing CSV", "tooltip": {"sort": 2, "shared": true, "value_type": "individual", "msResolution": true}, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "targets": [{"expr": "haproxy_exporter_csv_parse_failures{instance=~\"$host:$port\"}", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "Exporter csv failures", "intervalFactor": 1, "refId": "A"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "short", "min": 0, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [], "percentage": false, "type": "graph", "error": false, "editable": true, "grid": {}, "stack": true, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "pointradius": 5, "maxPerRow": 1}, {"bars": false, "timeFrom": null, "links": [], "thresholds": [], "nullPointMode": "null", "renderer": "flot", "gridPos": {"y": 117, "h": 7, "w": 12, "x": 12}, "linewidth": 2, "steppedLine": false, "id": 41, "fill": 1, "title": "Current total HAProxy scrapes", "tooltip": {"sort": 2, "shared": true, "value_type": "individual", "msResolution": true}, "legend": {"rightSide": false, "total": false, "min": true, "max": true, "show": true, "current": true, "values": true, "alignAsTable": true, "avg": true}, "targets": [{"expr": "haproxy_exporter_total_scrapes{instance=~\"$host:$port\"}", "metric": "", "interval": "$interval", "step": 30, "legendFormat": "HAProxy scrapes", "intervalFactor": 1, "refId": "A"}], "yaxes": [{"logBase": 1, "show": true, "max": null, "format": "short", "min": 0, "label": null}, {"logBase": 1, "show": false, "max": null, "format": "short", "min": 0, "label": null}], "xaxis": {"show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [], "percentage": false, "type": "graph", "error": false, "editable": true, "grid": {}, "stack": true, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "Prometheus", "pointradius": 5, "maxPerRow": 1}], "type": "row", "id": 102}], "id": 10, "templating": {"list": [{"regex": "/([^:]+):.*/", "definition": "", "multi": false, "hide": 0, "name": "host", "tags": [], "allValue": null, "tagValuesQuery": null, "skipUrlSync": false, "refresh": 1, "label": "Host", "current": {"text": "172.16.104.2", "selected": false, "value": "172.16.104.2"}, "sort": 1, "type": "query", "datasource": "Prometheus", "error": null, "query": "label_values(haproxy_up, instance)", "useTags": false, "tagsQuery": null, "options": [], "includeAll": false}, {"regex": "/[^:]+:(.*)/", "definition": "", "multi": false, "hide": 2, "name": "port", "tags": [], "allValue": null, "tagValuesQuery": "", "skipUrlSync": false, "refresh": 1, "label": null, "current": {"text": "9101", "selected": false, "value": "9101"}, "sort": 0, "type": "query", "datasource": "Prometheus", "error": null, "query": "label_values(haproxy_up, instance)", "useTags": false, "tagsQuery": "", "options": [], "includeAll": false}, {"regex": "", "definition": "", "multi": true, "hide": 0, "name": "backend", "tags": [], "allValue": null, "tagValuesQuery": null, "skipUrlSync": false, "refresh": 1, "label": "Backend", "current": {"text": "All", "selected": false, "value": "$__all"}, "sort": 1, "type": "query", "datasource": "Prometheus", "error": null, "query": "label_values(haproxy_backend_bytes_in_total{instance=~\"$host:$port\"}, backend)", "useTags": false, "tagsQuery": null, "options": [], "includeAll": true}, {"regex": "", "definition": "", "multi": true, "hide": 0, "name": "frontend", "tags": [], "allValue": null, "tagValuesQuery": null, "skipUrlSync": false, "refresh": 1, "label": "Frontend", "current": {"text": "All", "selected": false, "value": "$__all"}, "sort": 1, "type": "query", "datasource": "Prometheus", "error": null, "query": "label_values(haproxy_frontend_bytes_in_total{instance=~\"$host:$port\"}, frontend)", "useTags": true, "tagsQuery": null, "options": [], "includeAll": true}, {"regex": "", "definition": "", "multi": true, "hide": 0, "name": "server", "tags": [], "allValue": null, "tagValuesQuery": null, "skipUrlSync": false, "refresh": 1, "label": "Server", "current": {"text": "All", "selected": false, "value": "$__all"}, "sort": 1, "type": "query", "datasource": "Prometheus", "error": null, "query": "label_values(haproxy_server_bytes_in_total{instance=~\"$host:$port\", backend=~\"$backend\"}, server)", "useTags": false, "tagsQuery": null, "options": [], "includeAll": true}, {"regex": "", "definition": "", "multi": true, "hide": 0, "name": "code", "tags": [], "allValue": null, "tagValuesQuery": null, "skipUrlSync": false, "refresh": 1, "label": "HTTP Code", "current": {"text": "All", "selected": false, "value": "$__all"}, "sort": 1, "type": "query", "datasource": "Prometheus", "error": null, "query": "label_values(haproxy_server_http_responses_total{instance=~\"$host:$port\", backend=~\"$backend\", server=~\"$server\"}, code)", "useTags": false, "tagsQuery": null, "options": [], "includeAll": true}, {"skipUrlSync": false, "hide": 0, "name": "interval", "auto_count": 30, "auto": true, "refresh": 2, "label": "Interval", "current": {"text": "30s", "selected": false, "value": "30s"}, "auto_min": "10s", "error": null, "query": "30s,1m,5m,1h,6h,1d", "type": "interval", "options": [{"text": "auto", "selected": false, "value": "$__auto_interval_interval"}, {"text": "30s", "selected": true, "value": "30s"}, {"text": "1m", "selected": false, "value": "1m"}, {"text": "5m", "selected": false, "value": "5m"}, {"text": "1h", "selected": false, "value": "1h"}, {"text": "6h", "selected": false, "value": "6h"}, {"text": "1d", "selected": false, "value": "1d"}]}]}}}